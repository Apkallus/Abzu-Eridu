## 构建记录 

### 目录

读取 /游乐场 目录中的所有挑战元数据与自定义标记生成索引。
```
/游乐场
├── index.md               # 自动生成的挑战总索引
├── JuiceShop
│   ├── 注入攻击
│   │   ├── SQL注入.md     # 含YAML元数据
│   │   └── NoSQL注入.md
│   ├── XSS攻击
│   │   └── DOM型XSS.md
│   └── 配置漏洞
│       └── 管理员权限.md
└── PortSwigger
    ├── 服务端漏洞
    │   ├── SSRF漏洞.md
    │   └── 文件上传.md
    └── 客户端漏洞
        ├── CSRF漏洞.md
        └── CORS漏洞.md
```
#### 目录树构建
- 每个靶场拥有单独的文件夹
- 按照所在靶场内的主题对 lab 进行分类
- 使用 lab 名作为文件名

### 元数据与自定义标记

将 lab 分类、标签等信息，记录到 Frontmatter 的结构化元数据中。
将对 lab 的分析记录到自定义标签中，从而同时构建索引与在预览中显示。
<https://www.markdownlang.com/zh/advanced/frontmatter.html>

```md
---
title: "SQL注入"           
difficulty: "中等"              
category: "注入攻击"            
tags:
    - SQL
    - 数据库
    - 身份验证绕过
---
<!-- muse start -->
对挑战的分析
<!-- muse end -->
```

#### 元数据字段值
- ```title``` 不一定必要，文件名与 ```title``` 通常相同
- ```category``` 尝试定位漏洞的根本原因
    - 对应 OWASP 威胁与对策分类法 ```threat and countermeasure classification```
- ```tags``` 列表拥有一行的 ```[]``` 式或多行的 ```-``` 式

### 构建索引

- python 导入 Frontmatter 库解析元数据
    <https://python-frontmatter.readthedocs.io/en/latest/>
- 对 lab 的分析使用正则表达式匹配
    <https://docs.python.org/zh-cn/3/library/re.html#>

- 简化的索引
    ```md
    ### 注入攻击
    - 挑战1 相对链接
    思考    
    - 挑战2 相对链接
    思考

    ### 服务器端漏洞
    - 挑战3 相对链接
    思考
    - 挑战4 相对链接
    思考
    ```