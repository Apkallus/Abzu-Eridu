# 测试易受攻击的“记住密码”功能

## 概述

凭证是目前应用最广泛的身份认证技术。由于用户名-密码组合的使用范围如此广泛，用户难以在众多应用场景中妥善管理自己的凭证。

为帮助用户管理凭证，主要出现了以下技术方案：

- 应用程序提供**记住我**功能，允许用户在较长时间内保持登录状态，无需重复输入凭证。
- 密码管理器（包括浏览器内置的密码管理器）可安全存储用户凭证，并能在用户无干预的情况下自动填充登录表单。

## 测试目标

- 验证生成会话的安全管理机制，确保不会危及用户凭证安全。

## 测试方法

虽然这些技术提升了用户体验并让用户无需记忆凭证，但它们也扩大了攻击面。部分应用存在以下情况：

- 以编码形式将凭证存储在浏览器存储机制中，可通过遵循[WSTG Web存储测试方案](../11-Client-side_Testing/12-Testing_Browser_Storage.md)并执行[WSTG 会话分析](../06-Session_Management_Testing/01-Testing_for_Session_Management_Schema.md#会话分析)场景进行验证。客户端应用不应以任何方式存储凭证，而应使用服务端生成的令牌进行替代。
- 自动填充用户凭证的行为可能被以下攻击方式利用：
    - [WSTG 点击劫持（ClickJacking）](../11-Client-side_Testing/09-Testing_for_Clickjacking.md)攻击
    - [WSTG 跨站请求伪造（CSRF）](../06-Session_Management_Testing/05-Testing_for_Cross_Site_Request_Forgery.md)攻击
- 需对令牌进行生命周期分析：部分永不过期的令牌一旦被盗将危及用户安全。请确保遵循[WSTG 会话超时](../06-Session_Management_Testing/07-Testing_Session_Timeout.md)测试方案。

## 修复方案

- 遵循[OWASP CS 会话管理](https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html)最佳实践
- 确保凭证不以明文或易解密的编码/加密形式存于浏览器存储中，应存储在服务端并符合[OWASP CS 密码存储](https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html)最佳实践

## 引用

- [WSTG-ATHN-05](https://github.com/OWASP/wstg/blob/master/document/4-Web_Application_Security_Testing/04-Authentication_Testing/05-Testing_for_Vulnerable_Remember_Password.md)